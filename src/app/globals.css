@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Design tokens as CSS variables */
  :root {
    /* Container Layout System */
    --container-max-width: 80rem; /* 1280px = max-w-7xl */
    --container-padding-xs: 1rem; /* 16px for mobile */
    --container-padding-sm: 1.5rem; /* 24px for tablet */
    --container-padding-lg: 2rem; /* 32px for desktop */

    /* Base Color Tokens - Light Mode */
    --background: #ffffff;
    --background-rgb: 255, 255, 255;
    --foreground: #111827; /* gray-900 */
    --card: #ffffff;
    --card-foreground: #1f2937; /* gray-800 */
    --popover: #ffffff;
    --popover-foreground: #111827; /* gray-900 */
    --border: #e5e7eb; /* gray-200 */
    --input: #e5e7eb; /* gray-200 */

    /* Reading Card Theme Variables */
    --reading-card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    --reading-card-bg: #f3f4f6;
    --muted: #f3f4f6; /* gray-100 */
    --muted-foreground: #6b7280; /* gray-500 */
    --accent: #eff6ff; /* blue-50 */
    --accent-foreground: #2563eb; /* blue-600 */

    /* Primary color tokens */
    --primary-50: #eff6ff; /* blue-50 */
    --primary-100: #dbeafe; /* blue-100 */
    --primary-200: #bfdbfe; /* blue-200 */
    --primary-300: #93c5fd; /* blue-300 */
    --primary-400: #60a5fa; /* blue-400 */
    --primary-500: #3b82f6; /* blue-500 */
    --primary-600: #2563eb; /* blue-600 */
    --primary-700: #1d4ed8; /* blue-700 */
    --primary-800: #1e40af; /* blue-800 */
    --primary-900: #1e3a8a; /* blue-900 */
  }

  /* Dark Mode Tokens */
  .dark {
    --background: #111827; /* gray-900 */
    --background-rgb: 17, 24, 39;
    --foreground: #f9fafb; /* gray-50 */
    --card: #1f2937; /* gray-800 */
    --card-foreground: #f3f4f6; /* gray-100 */
    --popover: #1f2937; /* gray-800 */
    --popover-foreground: #f9fafb; /* gray-50 */
    --border: #374151; /* gray-700 */
    --input: #374151; /* gray-700 */

    /* Reading Card Theme Variables - Dark Mode */
    --reading-card-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    --reading-card-bg: #1f2937;
    --muted: #374151; /* gray-700 */
    --muted-foreground: #9ca3af; /* gray-400 */
    --accent: #1e3a8a; /* blue-900 */
    --accent-foreground: #93c5fd; /* blue-300 */

    /* Primary color tokens - dark mode */
    --primary-50: #0d1117; /* gray-950 */
    --primary-100: #1f2937; /* gray-800 */
    --primary-200: #374151; /* gray-700 */
    --primary-300: #4b5563; /* gray-600 */
    --primary-400: #6b7280; /* gray-500 */
    --primary-500: #9ca3af; /* gray-400 */
    --primary-600: #d1d5db; /* gray-300 */
    --primary-700: #e5e7eb; /* gray-200 */
    --primary-800: #f3f4f6; /* gray-100 */
    --primary-900: #f9fafb; /* gray-50 */
  }

  /* Targeted theme transitions - only for elements that need animation */
  .theme-transition {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-duration: 200ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Apply theme transitions to specific elements */
  body,
  header,
  nav,
  main,
  .site-header,
  .nav-list a,
  .dark-mode-toggle {
    @apply theme-transition;
  }

  /* Exclude media elements from transitions */
  img,
  video,
  svg {
    transition: none !important;
  }

  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .theme-transition {
      transition-duration: 0.01ms !important;
    }
  }

  /* Optimized will-change - only for actively transitioning elements */
  .theme-transitioning .theme-transition {
    will-change: background-color, border-color, color;
  }

  /* Reading card specific transitions */
  .reading-card {
    transition:
      box-shadow 200ms ease,
      background-color 200ms ease;
    contain: layout style paint;
  }

  /* Dark mode moon icon glow effect */
  .dark .dark-mode-toggle svg {
    filter: drop-shadow(0 0 8px rgba(148, 163, 184, 0.4));
  }

  /* Base styles */
  html {
    @apply h-full scroll-smooth;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    @apply h-full bg-background text-foreground font-inter leading-relaxed antialiased;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-space-grotesk font-bold tracking-tight;
  }

  h1 {
    @apply text-4xl md:text-5xl mb-6;
  }

  h2 {
    @apply text-3xl md:text-4xl mb-4;
  }

  h3 {
    @apply text-2xl md:text-3xl mb-3;
  }

  h4 {
    @apply text-xl md:text-2xl mb-2;
  }

  p {
    @apply mb-4;
  }

  /* Focus styles for accessibility */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary-600 dark:outline-primary-500;
  }
}

@layer components {
  /* Container System - Unified alignment across all sections */
  .container-content {
    width: 100%;
    max-width: var(--container-max-width);
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--container-padding-xs);
    padding-right: var(--container-padding-xs);
  }

  @media (min-width: 640px) {
    .container-content {
      padding-left: var(--container-padding-sm);
      padding-right: var(--container-padding-sm);
    }
  }

  @media (min-width: 1024px) {
    .container-content {
      padding-left: var(--container-padding-lg);
      padding-right: var(--container-padding-lg);
    }
  }

  /* Full-Width Breakout - Allows components to break out of container-content constraints */
  /* Use when a component inside container-content needs to span full viewport width */
  /* while maintaining content alignment with other constrained elements */
  .full-width-breakout {
    margin-left: calc(-1 * var(--container-padding-xs));
    margin-right: calc(-1 * var(--container-padding-xs));
    padding-left: var(--container-padding-xs);
    padding-right: var(--container-padding-xs);
  }

  @media (min-width: 640px) {
    .full-width-breakout {
      margin-left: calc(-1 * var(--container-padding-sm));
      margin-right: calc(-1 * var(--container-padding-sm));
      padding-left: var(--container-padding-sm);
      padding-right: var(--container-padding-sm);
    }
  }

  @media (min-width: 1024px) {
    .full-width-breakout {
      margin-left: calc(-1 * var(--container-padding-lg));
      margin-right: calc(-1 * var(--container-padding-lg));
      padding-left: var(--container-padding-lg);
      padding-right: var(--container-padding-lg);
    }
  }

  /* Site Header */
  .site-header {
    @apply border-b border-border backdrop-blur-sm bg-background;
    background-color: rgba(var(--background-rgb), 0.95);
  }

  .site-header > div {
    @apply py-8;
  }

  /* Navigation */
  .nav-list {
    @apply flex gap-4 list-none;
  }

  .nav-list a {
    @apply relative no-underline text-foreground font-semibold transition-colors duration-200 hover:text-foreground focus-visible:outline-offset-4;
  }

  /* Hover animation for all links */
  .nav-list a::after {
    @apply content-[''] absolute left-0 -bottom-2.5 h-0.5 w-full bg-foreground scale-x-0 origin-left transition-transform duration-200 ease-elegant-entrance;
  }

  .nav-list a:hover::after {
    @apply scale-x-100;
  }

  /* Active page indicator - subtle persistent underline */
  .nav-list a[data-active='true']::before {
    @apply content-[''] absolute left-0 -bottom-2.5 h-px w-full bg-foreground opacity-60;
  }

  /* Active page hover - underline becomes fuller */
  .nav-list a[data-active='true']:hover::before {
    @apply h-0.5 opacity-100 transition-all duration-200;
  }

  /* Main content */
  main {
    @apply relative;
  }

  /* Heading styles */
  .big-heading {
    @apply text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight;
  }

  .medium-heading {
    @apply text-2xl md:text-3xl font-semibold mb-8 tracking-tight;
  }

  /* Section heading for better hierarchy */
  .section-heading {
    @apply text-3xl md:text-4xl font-bold mb-12 tracking-tight;
    @apply uppercase text-xs md:text-sm font-semibold tracking-[0.1em] opacity-80;
  }

  /* Link styles */
  .content-link {
    @apply relative no-underline text-foreground transition-colors duration-200 focus-visible:outline-offset-4;
  }

  .content-link::after {
    @apply content-[''] absolute left-0 -bottom-0.5 h-px w-full bg-foreground scale-x-0 origin-left transition-transform duration-200 ease-elegant-entrance;
  }

  .content-link:hover::after {
    @apply scale-x-100;
  }

  .secondary-link {
    @apply text-sm border-b border-dashed border-foreground pb-0.5 transition-colors duration-200 focus-visible:outline-offset-4;
  }

  .secondary-link:hover {
    @apply border-solid border-foreground;
  }

  /* Button styles */
  .btn {
    @apply inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-700 dark:hover:bg-primary-600 focus-visible:ring-primary-600;
  }

  .btn-secondary {
    @apply bg-muted hover:bg-muted/80 text-muted-foreground focus-visible:ring-muted;
  }

  .btn-outline {
    @apply border border-border bg-transparent hover:bg-muted text-foreground focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-foreground focus-visible:ring-opacity-20;
  }

  .btn-ghost {
    @apply bg-transparent hover:bg-muted text-foreground focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-foreground focus-visible:ring-opacity-20;
  }

  /* Button sizes */
  .btn-sm {
    @apply h-8 px-3 text-xs rounded-md;
  }

  .btn-md {
    @apply h-10 px-4 py-2 text-sm rounded-md;
  }

  .btn-lg {
    @apply h-11 px-8 text-base rounded-md;
  }

  /* Project cards */
  .project-card {
    @apply border border-border relative overflow-hidden flex flex-col transition-all duration-300 
    animate-fade-in opacity-0 translate-y-2.5 hover:shadow-card-hover dark:hover:shadow-card-hover-dark hover:scale-[1.01] 
    bg-card text-card-foreground rounded-lg;
  }

  .project-image-container {
    @apply relative w-full h-44;
  }

  .project-content {
    @apply p-4 flex flex-col justify-between h-[59%];
  }

  .project-links {
    @apply mt-4 flex gap-6 items-center;
  }

  /* Clean project link style with animated underline matching navbar */
  .project-link {
    @apply relative text-sm lowercase font-medium text-foreground;
    @apply no-underline transition-colors duration-200;
    @apply border-b border-dotted border-gray-400 dark:border-gray-600 pb-0.5;
  }

  .project-link::after {
    @apply content-[''] absolute left-0 -bottom-0.5 h-px w-full bg-foreground;
    @apply scale-x-0 origin-left transition-transform duration-200 ease-elegant-entrance;
  }

  .project-link:hover::after {
    @apply scale-x-100;
  }

  .project-link:hover {
    @apply border-transparent;
  }

  .projects-list {
    @apply flex flex-col gap-6 md:gap-8;
  }

  .project-item {
    @apply relative border-none bg-transparent w-full;
    @apply transition-all duration-200;
    @apply hover:bg-gray-50 dark:hover:bg-gray-900/30;
    @apply -mx-4 px-4 py-4 rounded-lg;
  }

  /* Subtle left accent on hover */
  .project-item::before {
    @apply content-[''] absolute left-0 top-0 h-full w-1 bg-primary-600;
    @apply scale-x-0 origin-left transition-transform duration-200;
  }

  .project-item:hover::before {
    @apply scale-x-100;
  }

  /* Project title styling */
  .project-title {
    @apply text-xl md:text-2xl font-bold mb-2 tracking-tight;
  }

  /* Project description with better hierarchy */
  .project-description {
    @apply text-base leading-relaxed mb-3 text-gray-700 dark:text-gray-300;
    @apply text-balance;
  }

  .tech-stack {
    @apply flex flex-wrap gap-2 mt-2 mb-4;
  }

  /* Tech stack badges */
  .tech-badge {
    @apply text-xs px-2 py-1 rounded-md;
    @apply bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300;
    @apply font-medium tracking-wide;
  }

  .tech-stack li {
    @apply bg-muted dark:bg-muted text-muted-foreground py-1 px-2 rounded-md text-xs;
  }

  /* Quote text display - preserves line breaks for poetry, verses, etc. */
  .quote-text-display {
    white-space: pre-line;
  }

  /* For truncated quotes in lists - single line with ellipsis */
  .quote-text-truncated {
    @apply whitespace-nowrap overflow-hidden text-ellipsis;
  }

  /* About section */
  .about-section {
    @apply flex flex-col gap-4;
  }

  .about-content p {
    @apply mb-4;
  }

  .about-image-container {
    @apply flex justify-center mt-4;
  }

  /* Typewriter */
  .typewriter-container {
    @apply font-space-grotesk font-semibold text-foreground transition-colors duration-300;
  }
}

/* Custom animations are now defined in Tailwind config */

/* Icon animation keyframes for theme toggle - subtle scale pulse */
@keyframes iconSwitch {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(0.85);
    opacity: 0.8;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Typewriter cursor blinking animation */
@keyframes blink {
  0%,
  50% {
    opacity: 1;
  }
  51%,
  100% {
    opacity: 0;
  }
}

.typewriter-cursor {
  animation: blink 1s infinite;
  color: currentColor;
}

/* Error page animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 300ms ease-out;
}

/* Glitch effect animation */
@keyframes glitch {
  0% {
    text-shadow:
      0.05em 0 0 rgba(255, 0, 0, 0.75),
      -0.025em -0.05em 0 rgba(0, 255, 0, 0.75),
      0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
  }
  14% {
    text-shadow:
      0.05em 0 0 rgba(255, 0, 0, 0.75),
      -0.025em -0.05em 0 rgba(0, 255, 0, 0.75),
      0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
  }
  15% {
    text-shadow:
      -0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
      0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
      -0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
  }
  49% {
    text-shadow:
      -0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
      0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
      -0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
  }
  50% {
    text-shadow:
      0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
      0.05em 0 0 rgba(0, 255, 0, 0.75),
      0 -0.05em 0 rgba(0, 0, 255, 0.75);
  }
  99% {
    text-shadow:
      0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
      0.05em 0 0 rgba(0, 255, 0, 0.75),
      0 -0.05em 0 rgba(0, 0, 255, 0.75);
  }
  100% {
    text-shadow:
      -0.025em 0 0 rgba(255, 0, 0, 0.75),
      -0.025em -0.025em 0 rgba(0, 255, 0, 0.75),
      -0.025em -0.05em 0 rgba(0, 0, 255, 0.75);
  }
}

.animate-glitch {
  position: relative;
  animation: glitch 2s infinite;
}

/* Glitch effect with pseudo elements for layers */
.animate-glitch::before,
.animate-glitch::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.animate-glitch::before {
  animation: glitch-1 0.5s infinite;
  color: rgba(255, 0, 0, 0.75);
  z-index: -1;
}

.animate-glitch::after {
  animation: glitch-2 0.5s infinite;
  color: rgba(0, 0, 255, 0.75);
  z-index: -2;
}

@keyframes glitch-1 {
  0% {
    clip-path: inset(40% 0 60% 0);
    transform: translate(-2px, -2px);
  }
  20% {
    clip-path: inset(80% 0 10% 0);
    transform: translate(2px, 2px);
  }
  40% {
    clip-path: inset(20% 0 70% 0);
    transform: translate(-2px, 2px);
  }
  60% {
    clip-path: inset(60% 0 30% 0);
    transform: translate(2px, -2px);
  }
  80% {
    clip-path: inset(10% 0 85% 0);
    transform: translate(-2px, 0);
  }
  100% {
    clip-path: inset(40% 0 60% 0);
    transform: translate(0);
  }
}

@keyframes glitch-2 {
  0% {
    clip-path: inset(60% 0 35% 0);
    transform: translate(2px, 2px);
  }
  20% {
    clip-path: inset(10% 0 85% 0);
    transform: translate(-2px, -2px);
  }
  40% {
    clip-path: inset(70% 0 20% 0);
    transform: translate(2px, -2px);
  }
  60% {
    clip-path: inset(30% 0 60% 0);
    transform: translate(-2px, 2px);
  }
  80% {
    clip-path: inset(85% 0 10% 0);
    transform: translate(2px, 0);
  }
  100% {
    clip-path: inset(60% 0 35% 0);
    transform: translate(0);
  }
}

/* Disable animations for reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-glitch {
    animation: none;
  }

  .animate-glitch::before,
  .animate-glitch::after {
    display: none;
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .nav-list {
    @apply flex-col;
  }

  .big-heading {
    @apply text-3xl;
  }
}
